<head>
    <script type='text/javascript' src='//bitmovin-a.akamaihd.net/bitmovin-player/stable/7.8/bitmovinplayer.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js'></script>
    <script src='https://code.jquery.com/jquery-3.3.1.min.js'></script>
    <script src='/app.js'></script>
<style>body{margin:0;}iframe{width:100%;height:100%;}.bmpui-ui-watermark{display:none;}.bmpui-ui-volumeslider .bmpui-seekbar .bmpui-seekbar-playbackposition-marker{background-color: #59fa14;}.bmpui-ui-seekbar .bmpui-seekbar .bmpui-seekbar-playbackposition, .bmpui-ui-volumeslider .bmpui-seekbar .bmpui-seekbar-playbackposition{background-color: #59fa14;}.bmpui-ui-seekbar .bmpui-seekbar .bmpui-seekbar-playbackposition-marker, .bmpui-ui-volumeslider .bmpui-seekbar .bmpui-seekbar-playbackposition-marker{border-color:#59fa14;background-color:#59fa14;}</style>
</head>
<body>
    <div id='my-player'></div>
    <script>

        var rand = Math.floor(Math.random() * (999 - 100 + 1) + 100);
        var playReadyLaURL = 'https://mvplicense.9c9media.ca/playready';
        var widevineLaURL = 'https://mvplicense.9c9media.ca/widevine';

        const urls = 'https://pe-ak-lp04a-9c9media.akamaized.net/live/TSN/p/dash/20000001/9d50f71ec5db29e6/manifest.mpd';

        const modifiedUrls = urls.replace('manifest.mpd', '');

        console.log(modifiedUrls)

        $(document).ready(function() {
            var conf = {
                key: 'Y2tvaWtjY29lbSEqXyVrZG9lYTJzZT9yb201ZGFzaXMzMGRiMEElXzo=',
                style: {
                    width: '100%',
                    aspectratio: '16:9',
                    controls: true
                },
                source: {
                title: "Reproductor | FÃºtbol Libre TV",
                description: "futbollibrehd.online",
                    dash: 'https://images229-focus-opensocial.googleusercontent.com/gadgets/proxy?container=focus&url=https://pe-ak-lp04a-9c9media.akamaized.net/live/TSN/p/dash/20000001/9d50f71ec5db29e6/manifest.mpd',
                    drm: {
                        widevine: {
                            LA_URL: widevineLaURL,

                        },

                    }
                },
                network: {
                    preprocessHttpRequest: function(type, request) {

                        if (request.url.includes('.mp4') || request.url.includes('m4f')) {
                            request.url = 'https://images133-focus-opensocial.googleusercontent.com/gadgets/proxy?container=focus&url=' + request.url;
                        }

                        if (request.url.includes('&url=https://images229-focus-opensocial.googleusercontent.com/gadgets/index')) {
                            const originalUrl = decodeURIComponent(request.url.split('&url=')[1]);
                            const modifiedUrl = modifiedUrls + originalUrl.substring(originalUrl.indexOf('/index/'));
                            request.url = 'https://images349-focus-opensocial.googleusercontent.com/gadgets/proxy?container=focus&url=' + encodeURIComponent(modifiedUrl);
                        }

                        return request;
                    }
                },
            };
            var player = bitmovin.player('my-player');

            player.setup(conf).then(function(value) {
                // Success
                console.log('Successfully created bitmovin player instance');
            }, function(reason) {
                // Error!
                console.log('Error while creating bitmovin player instance');
            });
        });
    </script>
  
